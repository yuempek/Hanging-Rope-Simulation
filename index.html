<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RÃ¼zgar AltÄ±nda Halat DavranÄ±ÅŸÄ±</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            color: white;
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .container {
            max-width: 1000px;
            width: 100%;
            display: contents;
        }
        .language-selector {
            display: block;
            width: 100%;
        }
        
        .language-btn {
            background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            padding: 8px 16px;
            margin: 0 5px;
            cursor: pointer;
            border-radius: 5px;
            transition: all 0.3s ease;
            float: right;
        }
        .language-btn:hover {
            background: rgba(255,255,255,0.3);
        }
        .language-btn.active {
            background: #4caf50;
            border-color: #4caf50;
        }
        h1 {
            text-align: center;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        .controls-panel {
            padding: 20px;
            margin: 20px 0;
            display: flex;
            flex-direction: row;
        }
        .controls-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
            padding: 50px;
        }
        .control-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        label {
            font-size: 14px;
            color: #e0e0e0;
            font-weight: bold;
        }
        input[type="range"] {
            width: 100%;
            height: 6px;
            background: rgba(255,255,255,0.3);
            border-radius: 3px;
        }
        .value-display {
            text-align: center;
            font-weight: bold;
            color: #ffeb3b;
        }
        canvas {
            border: 2px solid rgba(255,255,255,0.3);
            background: white;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
        }
        
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="language-selector">
        <button class="language-btn active" onclick="setLanguage('tr')" data-lang="tr">ðŸ‡¹ðŸ‡· TR</button>
        <button class="language-btn" onclick="setLanguage('en')" data-lang="en">ðŸ‡ºðŸ‡¸ EN</button>
    </div>

    <div class="container">
        <h1 class="title" data-tr="RÃ¼zgar AltÄ±nda Halat DavranÄ±ÅŸÄ±" data-en="Rope Behavior Under Wind">RÃ¼zgar AltÄ±nda Halat DavranÄ±ÅŸÄ±</h1>
        
        <div class="controls-panel">
            <div class="canvas-grid">
                <canvas id="canvas" width="800" height="600"></canvas>
            </div>
            <div class="controls-grid">
                <div class="control-group">
                    <label data-tr="RÃ¼zgar HÄ±zÄ± (m/s)" data-en="Wind Speed (m/s)">RÃ¼zgar HÄ±zÄ± (m/s)</label>
                    <input type="range" id="windSpeed" min="0" max="100" step="0.5" value="5">
                    <div class="value-display" id="windSpeedValue">5.0 m/s</div>
                </div>
                <div class="control-group">
                    <label data-tr="KÃ¼tle (kg)" data-en="Mass (kg)">KÃ¼tle (kg)</label>
                    <input type="range" id="mass" min="0.0" max="102.549467629355" step="0.01" value="15">
                    <div class="value-display" id="massValue">15.0 kg</div>
                </div>
                <div class="control-group">
                    <label data-tr="Halat Birim KÃ¼tlesi (kg)" data-en="Rope Unit Mass (kg)">Halat Birim KÃ¼tlesi (kg)</label>
                    <input type="range" id="ropemass" min="0.0" max="5" step="0.01" value="1">
                    <div class="value-display" id="ropemassValue">1.0 kg</div>
                </div>
                <div class="control-group">
                    <label data-tr="KÃ¼tle Drag KatsayÄ±sÄ± (Cd)" data-en="Mass Drag Coefficient (Cd)">KÃ¼tle Drag KatsayÄ±sÄ± (Cd)</label>
                    <input type="range" id="massdragCoeff" min="0.0" max="5" step="0.01" value="0.5">
                    <div class="value-display" id="massdragCoeffValue">0.5</div>
                </div>
                <div class="control-group">
                    <label data-tr="Halat Drag KatsayÄ±sÄ± (Cd)" data-en="Rope Drag Coefficient (Cd)">Halat Drag KatsayÄ±sÄ± (Cd)</label>
                    <input type="range" id="ropedragCoeff" min="0.0" max="5" step="0.01" value="0.5">
                    <div class="value-display" id="ropedragCoeffValue">0.5</div>
                </div>
                <div class="control-group">
                    <label data-tr="Halat YÃ¼zey AlanÄ± (mÂ²)" data-en="Rope Surface Area (mÂ²)">Halat YÃ¼zey AlanÄ± (mÂ²)</label>
                    <input type="range" id="ropearea" min="0.00" max="1.0" step="0.001" value="0.01">
                    <div class="value-display" id="ropeareaValue">0.01 mÂ²</div>
                </div>
                <div class="control-group">
                    <label data-tr="KÃ¼tle YÃ¼zey AlanÄ± (mÂ²)" data-en="Mass Surface Area (mÂ²)">KÃ¼tle YÃ¼zey AlanÄ± (mÂ²)</label>
                    <input type="range" id="massarea" min="0.00" max="1.0" step="0.001" value="0.01">
                    <div class="value-display" id="massareaValue">0.01 mÂ²</div>
                </div>
                <div class="control-group">
                    <label data-tr="Ä°p UzunluÄŸu (m)" data-en="Rope Length (m)">Ä°p UzunluÄŸu (m)</label>
                    <input type="range" id="ropeLength" min="0.5" max="2" step="0.01" value="1">
                    <div class="value-display" id="ropeLengthValue">1.0 m</div>
                </div>
                <div class="control-group">
                    <label data-tr="Hava YoÄŸunluÄŸu (kg/mÂ³)" data-en="Air Density (kg/mÂ³)">Hava YoÄŸunluÄŸu (kg/mÂ³)</label>
                    <input type="range" id="airDensity" min="0.0" max="20" step="0.01" value="1.2">
                    <div class="value-display" id="airDensityValue">1.2 kg/mÂ³</div>
                </div>
            </div>
        </div>

    </div>

    <script>
        // Dil yÃ¶netimi
        let currentLanguage = 'tr';

        function setLanguage(lang) {
            currentLanguage = lang;
            
            // Aktif dil butonunu gÃ¼ncelle
            document.querySelectorAll('.language-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.getAttribute('data-lang') === lang) {
                    btn.classList.add('active');
                }
            });
            
            // Metinleri gÃ¼ncelle
            document.querySelectorAll('[data-tr][data-en]').forEach(element => {
                const text = element.getAttribute(`data-${lang}`);
                if (text) {
                    if (element.tagName === 'INPUT') {
                        element.placeholder = text;
                    } else {
                        element.textContent = text;
                    }
                }
            });
            
            // HTML lang attribute'unu gÃ¼ncelle
            document.documentElement.lang = lang;
            
            document.title = document.querySelector('h1.title').getAttribute(`data-${lang}`);
            
            
            // Canvas'Ä± yeniden Ã§iz (dil deÄŸiÅŸikliÄŸi iÃ§in)
            draw();
        }

        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        
        // Sabitler
        const g = 9.81; // YerÃ§ekimi ivmesi (m/sÂ²)
        
        // Canvas koordinatlarÄ±
        const startX = canvas.width / 2;
        const startY = 10; // Ãœst kÄ±sÄ±mda asma noktasÄ±
        const scale = 20; // 1 metre = 80 pixel
    
        let params = [];
        
        // Parametreler
        let ropeParam = {
            windSpeed: 5,      // m/s
            mass: 1,           // kg
            dragCoeff: 0.5,    // boyutsuz
            area: 0.1,         // mÂ²
            ropeLength: 1,     // m
            airDensity: 1.2    // kg/mÂ³
        };
        
        let massParam = {
            windSpeed: 5,      // m/s
            mass: 50,           // kg
            dragCoeff: 0.5,    // boyutsuz
            area: 0.1,         // mÂ²
            ropeLength: 1,     // m
            airDensity: 1.2    // kg/mÂ³
        };

        for (let i = 0; i < 20; i++) {
            params.push(ropeParam);
        }
        
        params.push(massParam);
        
        // Drag kuvvetini hesapla
        function calculateDragForce(windSpeed, dragCoeff, area, airDensity) {
            return 0.5 * airDensity * windSpeed * windSpeed * dragCoeff * area;
        }

        // Denge aÃ§Ä±sÄ±nÄ± hesapla
        function calculateEquilibriumAngle(dragForce, weight) {
            // const weight = mass * g;
            // tan(Î¸) = F_drag / (m * g)
            const tanAngle = dragForce / weight;
            const angleRad = Math.atan(tanAngle);
            const angleDeg = angleRad * 180 / Math.PI;
            return { angleRad, angleDeg };
        }

        // Pozisyonu hesapla
        function calculatePosition(angle, length) {
            const x = -length * Math.sin(angle);
            const y = -length * Math.cos(angle); // Negatif Ã§Ã¼nkÃ¼ aÅŸaÄŸÄ± doÄŸru
            return { x, y };
        }

        // Canvas koordinatlarÄ±na Ã§evir
        function toCanvas(refX, refY, x, y) {
            return {
                x: refX + x * scale,
                y: refY - y * scale
            };
        }

        function drawi(centerX, centerY, positionX, positionY, weight, dragForce, tension, massmarkersize) {
        
            // Asma noktasÄ±
            ctx.fillStyle = '#ccc';
            ctx.beginPath();
            ctx.arc(centerX, centerY, 1, 0, 2 * Math.PI);
            ctx.fill();
            
            // Ä°p
            // const massPos = toCanvas(centerX, centerY, positionX, positionY);
            const massPos = {x: positionX, y: positionY};
            ctx.strokeStyle = '#8d6e63';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(centerX, centerY);
            ctx.lineTo(massPos.x, massPos.y);
            ctx.stroke();
            
            ctx.fillStyle = '#555';
            ctx.beginPath();
            ctx.arc(massPos.x, massPos.y, massmarkersize, 0, 2 * Math.PI);
            ctx.fill();
        }
        
        // Ã‡izim fonksiyonu
        function draw() {
            // Canvas'Ä± temizle
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            { // rÃ¼zgar
                // RÃ¼zgar Ã§izgileri Ã§iz
                ctx.strokeStyle = '#CCC';
                ctx.lineWidth = 2;
                for (let i = 0; i < 1; i++) {
                    const y = 50 + i * 50;
                    ctx.beginPath();
                    ctx.moveTo(canvas.width - 100, y);
                    ctx.lineTo(canvas.width - 20, y);
                    ctx.stroke();
                    
                    // RÃ¼zgar ok baÅŸlarÄ±
                    ctx.beginPath();
                    ctx.moveTo(canvas.width - 100 + 00 , y);
                    ctx.lineTo(canvas.width - 100 + 10 , y - 5);
                    ctx.moveTo(canvas.width - 100 + 00 , y);
                    ctx.lineTo(canvas.width - 100 + 10 , y + 5);
                    ctx.stroke();
                }
            
                // RÃ¼zgar etiketi (dil desteÄŸiyle)
                ctx.fillStyle = '#1976d2';
                ctx.font = 'bold 16px Arial';
                const windLabel = currentLanguage === 'tr' ? 'RÃ¼zgar:' : 'Wind:';
                ctx.fillText(`${windLabel} ${ropeParam.windSpeed} m/s`, canvas.width - 150, 30);
            }
            
            const dragForces = [];
            const weights = [];
            const equilibriums = [];
            const positions = [];
            const tensions = [];
            const areas = [];

            let prevTensionX = 0;
            let prevTensionY = 0;
            
            
            for(let i = params.length-1; i >= 0; i--) {
                let dragForce = calculateDragForce(params[i].windSpeed, params[i].dragCoeff, params[i].area, params[i].airDensity);
                let weight = params[i].mass * g;
                let tensionX = dragForce + prevTensionX;
                let tensionY = weight + prevTensionY;
                let tension = Math.sqrt(tensionX*tensionX + tensionY*tensionY);
                let equilibrium = calculateEquilibriumAngle(tensionX, tensionY);
                let position = calculatePosition(equilibrium.angleRad, params[i].ropeLength);
                let area = params[i].area;
                
                dragForces.push(dragForce);
                weights.push(weight);
                equilibriums.push(equilibrium);
                positions.push(position);
                tensions.push(tension);
                areas.push(area);
                
                prevTensionX = tensionX;
                prevTensionY = tensionY;
                
            }
            
            let centerX = startX;
            let centerY = startY;
            
            for(let i = params.length-1; i >= 0; i--) {
                let dragForce = dragForces[i];
                let weight = weights[i];
                let tension = tensions[i];
                let position = positions[i];
                
                let px = position.x;
                let py = position.y;
                let p = toCanvas(centerX, centerY, px, py);
                
                let a = areas[i];
                let r = Math.sqrt(a);
                let v = r*r*r;
                
                drawi(centerX, centerY, p.x, p.y, weight, dragForce, tension, v*100);
                
                centerX = p.x;
                centerY = p.y;
            }     
         }

        // Kontrol gÃ¼ncellemeleri
        function updateControls() {
            document.getElementById('windSpeed').addEventListener('input', function() {
                ropeParam.windSpeed = parseFloat(this.value);
                massParam.windSpeed = parseFloat(this.value);
                document.getElementById('windSpeedValue').textContent = `${ropeParam.windSpeed.toFixed(2)} m/s`;
                draw();
            });
            
            document.getElementById('mass').addEventListener('input', function() {
                value = parseFloat(this.value);
                massParam.mass = (Math.exp(Math.sqrt(value))-1)/5;
                document.getElementById('massValue').textContent = `${massParam.mass.toFixed(2)} kg`;
                draw();
            });
            
            document.getElementById('ropemass').addEventListener('input', function() {
                ropeParam.mass = parseFloat(this.value);
                document.getElementById('ropemassValue').textContent = `${ropeParam.mass.toFixed(2)} kg`;
                draw();
            });
            
            document.getElementById('massdragCoeff').addEventListener('input', function() {
                massParam.dragCoeff = parseFloat(this.value);
                document.getElementById('massdragCoeffValue').textContent = massParam.dragCoeff.toFixed(2);
                draw();
            });
            
            document.getElementById('ropedragCoeff').addEventListener('input', function() {
                ropeParam.dragCoeff = parseFloat(this.value);
                document.getElementById('ropedragCoeffValue').textContent = ropeParam.dragCoeff.toFixed(2);
                draw();
            });
            
            document.getElementById('ropearea').addEventListener('input', function() {
                ropeParam.area = parseFloat(this.value);
                document.getElementById('ropeareaValue').textContent = `${ropeParam.area.toFixed(3)} mÂ²`;
                draw();
            });
            
            document.getElementById('massarea').addEventListener('input', function() {
                massParam.area = parseFloat(this.value);
                document.getElementById('massareaValue').textContent = `${massParam.area.toFixed(3)} mÂ²`;
                draw();
            });
            
            document.getElementById('ropeLength').addEventListener('input', function() {
                ropeParam.ropeLength = parseFloat(this.value);
                massParam.ropeLength = parseFloat(this.value);
                document.getElementById('ropeLengthValue').textContent = `${ropeParam.ropeLength.toFixed(2)} m`;
                draw();
            });
            
            document.getElementById('airDensity').addEventListener('input', function() {
                ropeParam.airDensity = parseFloat(this.value);
                massParam.airDensity = parseFloat(this.value);
                document.getElementById('airDensityValue').textContent = `${ropeParam.airDensity.toFixed(2)} kg/mÂ³`;
                draw();
            });
        }

        // BaÅŸlat
        updateControls();
        draw();
    </script>
</body>
</html>
